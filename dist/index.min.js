"use strict";(function(){var P=function(s){return typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(s,{get:function(o,i){return(typeof require!="undefined"?require:o)[i]}}):s}(function(s){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+s+'" is not supported')});var E=function(s,o){return function(){return o||s((o={exports:{}}).exports,o),o.exports}};var R=E(function(x,N){(function(s,o){typeof x=="object"&&typeof N!="undefined"?o(x):typeof define=="function"&&define.amd?define(["exports"],o):o(s.WHATWGFetch={})})(x,function(s){"use strict";var o=typeof globalThis!="undefined"&&globalThis||typeof self!="undefined"&&self||typeof o!="undefined"&&o,i={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function c(e){return e&&DataView.prototype.isPrototypeOf(e)}if(i.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(e){return e&&f.indexOf(Object.prototype.toString.call(e))>-1};function d(e){if(typeof e!="string"&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||e==="")throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function b(e){return typeof e!="string"&&(e=String(e)),e}function w(e){var r={next:function(){var a=e.shift();return{done:a===void 0,value:a}}};return i.iterable&&(r[Symbol.iterator]=function(){return r}),r}function t(e){this.map={},e instanceof t?e.forEach(function(r,a){this.append(a,r)},this):Array.isArray(e)?e.forEach(function(r){this.append(r[0],r[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(r){this.append(r,e[r])},this)}t.prototype.append=function(e,r){e=d(e),r=b(r);var a=this.map[e];this.map[e]=a?a+", "+r:r},t.prototype.delete=function(e){delete this.map[d(e)]},t.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},t.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},t.prototype.set=function(e,r){this.map[d(e)]=b(r)},t.prototype.forEach=function(e,r){for(var a in this.map)this.map.hasOwnProperty(a)&&e.call(r,this.map[a],a,this)},t.prototype.keys=function(){var e=[];return this.forEach(function(r,a){e.push(a)}),w(e)},t.prototype.values=function(){var e=[];return this.forEach(function(r){e.push(r)}),w(e)},t.prototype.entries=function(){var e=[];return this.forEach(function(r,a){e.push([a,r])}),w(e)},i.iterable&&(t.prototype[Symbol.iterator]=t.prototype.entries);function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new Promise(function(r,a){e.onload=function(){r(e.result)},e.onerror=function(){a(e.error)}})}function L(e){var r=new FileReader,a=g(r);return r.readAsArrayBuffer(e),a}function G(e){var r=new FileReader,a=g(r);return r.readAsText(e),a}function V(e){for(var r=new Uint8Array(e),a=new Array(r.length),h=0;h<r.length;h++)a[h]=String.fromCharCode(r[h]);return a.join("")}function U(e){if(e.slice)return e.slice(0);var r=new Uint8Array(e.byteLength);return r.set(new Uint8Array(e)),r.buffer}function D(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?typeof e=="string"?this._bodyText=e:i.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():i.arrayBuffer&&i.blob&&c(e)?(this._bodyArrayBuffer=U(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||n(e))?this._bodyArrayBuffer=U(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||(typeof e=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=l(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(L)}),this.text=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return G(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(V(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(W)}),this.json=function(){return this.text().then(JSON.parse)},this}var z=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function X(e){var r=e.toUpperCase();return z.indexOf(r)>-1?r:e}function m(e,r){if(!(this instanceof m))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');r=r||{};var a=r.body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,r.headers||(this.headers=new t(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,!a&&e._bodyInit!=null&&(a=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=r.credentials||this.credentials||"same-origin",(r.headers||!this.headers)&&(this.headers=new t(r.headers)),this.method=X(r.method||this.method||"GET"),this.mode=r.mode||this.mode||null,this.signal=r.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&a)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(a),(this.method==="GET"||this.method==="HEAD")&&(r.cache==="no-store"||r.cache==="no-cache")){var h=/([?&])_=[^&]*/;if(h.test(this.url))this.url=this.url.replace(h,"$1_="+new Date().getTime());else{var y=/\?/;this.url+=(y.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})};function W(e){var r=new FormData;return e.trim().split("&").forEach(function(a){if(a){var h=a.split("="),y=h.shift().replace(/\+/g," "),u=h.join("=").replace(/\+/g," ");r.append(decodeURIComponent(y),decodeURIComponent(u))}}),r}function $(e){var r=new t,a=e.replace(/\r?\n[\t ]+/g," ");return a.split("\r").map(function(h){return h.indexOf("\n")===0?h.substr(1,h.length):h}).forEach(function(h){var y=h.split(":"),u=y.shift().trim();if(u){var T=y.join(":").trim();r.append(u,T)}}),r}D.call(m.prototype);function v(e,r){if(!(this instanceof v))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');r||(r={}),this.type="default",this.status=r.status===void 0?200:r.status,this.ok=this.status>=200&&this.status<300,this.statusText=r.statusText===void 0?"":""+r.statusText,this.headers=new t(r.headers),this.url=r.url||"",this._initBody(e)}D.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new t(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var J=[301,302,303,307,308];v.redirect=function(e,r){if(J.indexOf(r)===-1)throw new RangeError("Invalid status code");return new v(null,{status:r,headers:{location:e}})},s.DOMException=o.DOMException;try{new s.DOMException}catch(e){s.DOMException=function(r,a){this.message=r,this.name=a;var h=Error(r);this.stack=h.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function O(e,r){return new Promise(function(a,h){var y=new m(e,r);if(y.signal&&y.signal.aborted)return h(new s.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function T(){u.abort()}u.onload=function(){var p={status:u.status,statusText:u.statusText,headers:$(u.getAllResponseHeaders()||"")};p.url="responseURL"in u?u.responseURL:p.headers.get("X-Request-URL");var B="response"in u?u.response:u.responseText;setTimeout(function(){a(new v(B,p))},0)},u.onerror=function(){setTimeout(function(){h(new TypeError("Network request failed"))},0)},u.ontimeout=function(){setTimeout(function(){h(new TypeError("Network request failed"))},0)},u.onabort=function(){setTimeout(function(){h(new s.DOMException("Aborted","AbortError"))},0)};function K(p){try{return p===""&&o.location.href?o.location.href:p}catch(B){return p}}u.open(y.method,K(y.url),!0),y.credentials==="include"?u.withCredentials=!0:y.credentials==="omit"&&(u.withCredentials=!1),"responseType"in u&&(i.blob?u.responseType="blob":i.arrayBuffer&&y.headers.get("Content-Type")&&y.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(u.responseType="arraybuffer")),r&&typeof r.headers=="object"&&!(r.headers instanceof t)?Object.getOwnPropertyNames(r.headers).forEach(function(p){u.setRequestHeader(p,b(r.headers[p]))}):y.headers.forEach(function(p,B){u.setRequestHeader(B,p)}),y.signal&&(y.signal.addEventListener("abort",T),u.onreadystatechange=function(){u.readyState===4&&y.signal.removeEventListener("abort",T)}),u.send(typeof y._bodyInit=="undefined"?null:y._bodyInit)})}O.polyfill=!0,o.fetch||(o.fetch=O,o.Headers=t,o.Request=m,o.Response=v),s.Headers=t,s.Request=m,s.Response=v,s.fetch=O,Object.defineProperty(s,"__esModule",{value:!0})})});var j=E(function(oe,I){R();I.exports=self.fetch.bind(self)});var S=E(function(_){"use strict";var Q=_&&_.__awaiter||function(s,o,i,c){function f(n){return n instanceof i?n:new i(function(d){d(n)})}return new(i||(i=Promise))(function(n,d){function b(l){try{t(c.next(l))}catch(g){d(g)}}function w(l){try{t(c.throw(l))}catch(g){d(g)}}function t(l){l.done?n(l.value):f(l.value).then(b,w)}t((c=c.apply(s,o||[])).next())})},Y=_&&_.__generator||function(s,o){var i={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},c,f,n,d;return d={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function b(t){return function(l){return w([t,l])}}function w(t){if(c)throw new TypeError("Generator is already executing.");for(;i;)try{if(c=1,f&&(n=t[0]&2?f.return:t[0]?f.throw||((n=f.return)&&n.call(f),0):f.next)&&!(n=n.call(f,t[1])).done)return n;switch(f=0,n&&(t=[t[0]&2,n.value]),t[0]){case 0:case 1:n=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,f=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(n=i.trys,!(n=n.length>0&&n[n.length-1])&&(t[0]===6||t[0]===2)){i=0;continue}if(t[0]===3&&(!n||t[1]>n[0]&&t[1]<n[3])){i.label=t[1];break}if(t[0]===6&&i.label<n[1]){i.label=n[1],n=t;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(t);break}n[2]&&i.ops.pop(),i.trys.pop();continue}t=o.call(s,i)}catch(l){t=[6,l],f=0}finally{c=n=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}};Object.defineProperty(_,"__esModule",{value:!0});_.Nodes=void 0;j();var Z=function(){function s(){this.nodeIndex=-1,this.committee=new Set,this.topology=[]}return s.prototype.init=function(o){return Q(this,void 0,void 0,function(){var i,c,f;return Y(this,function(n){switch(n.label){case 0:this.nodeIndex=-1,this.committee.clear(),this.topology=[],n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch(o)];case 2:return i=n.sent(),[4,i.json()];case 3:return c=n.sent(),this.topology=c,[3,5];case 4:return f=n.sent(),console.error("exception in fetch(".concat(o,"):"),f),[3,5];case 5:return[2]}})})},s.prototype.getNextNode=function(o){for(o===void 0&&(o=!0);;)return this.nodeIndex++,this.nodeIndex>=this.topology.length&&(this.nodeIndex=0),this.topology[this.nodeIndex]},s.prototype.getRandomNode=function(o){o===void 0&&(o=!0);for(var i=Math.floor(Math.random()*this.topology.length);;)return i++,i>=this.topology.length&&(i=0),this.topology[i]},s}();_.Nodes=Z});var q=E(function(A,F){"use strict";var M=A&&A.__awaiter||function(s,o,i,c){function f(n){return n instanceof i?n:new i(function(d){d(n)})}return new(i||(i=Promise))(function(n,d){function b(l){try{t(c.next(l))}catch(g){d(g)}}function w(l){try{t(c.throw(l))}catch(g){d(g)}}function t(l){l.done?n(l.value):f(l.value).then(b,w)}t((c=c.apply(s,o||[])).next())})},C=A&&A.__generator||function(s,o){var i={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},c,f,n,d;return d={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function b(t){return function(l){return w([t,l])}}function w(t){if(c)throw new TypeError("Generator is already executing.");for(;i;)try{if(c=1,f&&(n=t[0]&2?f.return:t[0]?f.throw||((n=f.return)&&n.call(f),0):f.next)&&!(n=n.call(f,t[1])).done)return n;switch(f=0,n&&(t=[t[0]&2,n.value]),t[0]){case 0:case 1:n=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,f=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(n=i.trys,!(n=n.length>0&&n[n.length-1])&&(t[0]===6||t[0]===2)){i=0;continue}if(t[0]===3&&(!n||t[1]>n[0]&&t[1]<n[3])){i.label=t[1];break}if(t[0]===6&&i.label<n[1]){i.label=n[1],n=t;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(t);break}n[2]&&i.ops.pop(),i.trys.pop();continue}t=o.call(s,i)}catch(l){t=[6,l],f=0}finally{c=n=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}};Object.defineProperty(A,"__esModule",{value:!0});A.Client=void 0;var ee=S(),k=function(){function s(o){this.config=o,this.host=o.host||"ton.gateway.orbs.network",this.nodes=new ee.Nodes}return s.prototype.init=function(){return M(this,void 0,void 0,function(){return C(this,function(o){switch(o.label){case 0:return[4,this.nodes.init("https://".concat(this.host,"/nodes"))];case 1:return o.sent(),[2]}})})},s.prototype.buildUrl=function(o,i){var c=this.config.urlVersion.toString(),f=this.config.network,n=this.config.protocol;return"https://".concat(this.host,"/").concat(o,"/").concat(c,"/").concat(f,"/").concat(n,"/").concat(i)},s.prototype.getNextNodeUrl=function(o,i){if(i===void 0&&(i=!1),!this.nodes.topology.length)throw new Error("Call init() first");return this.buildUrl(this.nodes.getNextNode().Name,o)},s.prototype.getRandNodeUrl=function(o,i){if(i===void 0&&(i=!1),!this.nodes.topology.length)throw new Error("Call init() first");return this.buildUrl(this.nodes.getRandomNode().Name,o)},s}();A.Client=k;function te(){return M(this,void 0,void 0,function(){var s,o,i,c,f;return C(this,function(n){switch(n.label){case 0:return s={urlVersion:1,network:"mainnet",protocol:"toncenter"},o=new k(s),[4,o.init()];case 1:for(n.sent(),i=o.getNextNodeUrl("getMasterChainInfo"),i=o.getNextNodeUrl("getMasterChainInfo"),i=o.getNextNodeUrl("getMasterChainInfo"),c=new Set,f=0;f<20;++f)c.add(o.getRandNodeUrl("getMasterChainInfo"));return console.log(c.size),[2]}})})}P.main===F&&te()});var ne=E(function(H){Object.defineProperty(H,"__esModule",{value:!0});var re=q();window.tonGateway=re.Client});ne();})();
